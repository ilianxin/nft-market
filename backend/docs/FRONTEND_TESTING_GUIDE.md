# 🧪 前端测试指南

## 📋 概述

本指南介绍如何在不连接MetaMask的情况下测试NFT市场前端功能。我们提供了多种测试方案，让您可以轻松验证所有功能。

## 🎯 测试方案

### **方案1：测试模式（推荐）**

#### **🔧 如何使用**
1. 启动前端应用
2. 在页面右上角点击 **"测试模式"** 按钮
3. 系统会自动使用Hardhat测试账户
4. 您现在可以使用所有功能，无需MetaMask

#### **✨ 特点**
- ✅ 无需MetaMask
- ✅ 使用安全的测试账户
- ✅ 完整功能体验
- ✅ 与后端完全集成

#### **🎭 测试账户信息**
```
地址: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
链ID: 31337 (Hardhat本地网络)
余额: 10000 ETH (测试币)
```

### **方案2：专用API测试页面**

#### **🔧 如何访问**
1. 在导航栏点击 **"API测试"** 按钮
2. 或直接访问：`http://localhost:3000/test`

#### **✨ 功能特点**
- 🧪 一键测试所有API
- 📊 实时查看测试结果
- 🛠️ 自定义测试数据
- 📝 详细的错误信息
- 🔄 可重复测试

#### **🎯 可测试的API**
- 获取订单列表
- 创建订单
- 获取物品列表
- 获取集合列表
- 获取活动列表
- 获取区块链状态

### **方案3：直接API调用**

#### **🔧 使用curl测试**

```bash
# 设置用户地址（重要！）
export USER_ADDR="0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"

# 1. 获取订单列表
curl -X GET "http://localhost:8080/api/v1/orders" \
  -H "X-User-Address: $USER_ADDR"

# 2. 创建订单
curl -X POST "http://localhost:8080/api/v1/orders" \
  -H "Content-Type: application/json" \
  -H "X-User-Address: $USER_ADDR" \
  -d '{
    "collection_address": "0x1234567890123456789012345678901234567890",
    "token_id": "123",
    "order_type": 1,
    "price": 0.5,
    "expire_time": 1704067200,
    "quantity_remaining": 1,
    "size": 1,
    "currency_address": "0x0000000000000000000000000000000000000000"
  }'

# 3. 获取区块链状态
curl -X GET "http://localhost:8080/api/v1/blockchain/status"
```

## 🚀 快速开始

### **步骤1：启动服务**

```bash
# 1. 启动MySQL数据库
cd NFTMarket
docker-compose up -d mysql

# 2. 启动本地以太坊网络
start-local-ethereum.bat  # Windows
# 或 ./start-local-ethereum.sh  # Linux/macOS

# 3. 启动后端
cd backend
go run main.go

# 4. 启动前端
cd frontend
npm start
```

### **步骤2：选择测试方式**

#### **🎯 方式A：界面测试（推荐新手）**
1. 打开浏览器：`http://localhost:3000`
2. 点击右上角 **"测试模式"** 按钮
3. 开始使用所有功能

#### **🧪 方式B：API测试（推荐开发者）**
1. 打开浏览器：`http://localhost:3000/test`
2. 点击 **"设置测试用户"** 按钮
3. 逐个测试各个API功能

#### **⚡ 方式C：命令行测试（推荐高级用户）**
使用上面提供的curl命令进行测试

## 🔍 测试检查清单

### **基础功能测试**
- [ ] 测试模式连接成功
- [ ] 页面导航正常
- [ ] API测试页面加载正常

### **订单功能测试**
- [ ] 创建订单成功
- [ ] 获取订单列表
- [ ] 订单详情显示正确
- [ ] 订单状态更新

### **物品功能测试**
- [ ] 获取物品列表
- [ ] 物品详情页面
- [ ] 物品搜索功能

### **区块链集成测试**
- [ ] 区块链状态查询
- [ ] 合约交互正常
- [ ] 事件监听工作

## 🐛 常见问题

### **Q1: 测试模式按钮不显示**
**A**: 确保没有连接MetaMask，刷新页面后重试

### **Q2: API测试失败**
**A**: 检查以下项目：
- 后端服务是否启动 (localhost:8080)
- 本地以太坊网络是否运行 (localhost:8545)
- 数据库是否正常连接

### **Q3: 创建订单失败**
**A**: 确保：
- 已点击 "设置测试用户" 按钮
- 测试数据格式正确
- 后端日志没有错误

### **Q4: 区块链状态显示错误**
**A**: 检查：
- Hardhat网络是否正在运行
- 合约是否已部署
- 后端配置是否正确

## 📊 测试数据示例

### **测试订单数据**
```json
{
  "collection_address": "0x1234567890123456789012345678901234567890",
  "token_id": "123",
  "order_type": 1,
  "price": 0.5,
  "expire_time": 1704067200,
  "quantity_remaining": 1,
  "size": 1,
  "currency_address": "0x0000000000000000000000000000000000000000"
}
```

### **测试账户**
```
地址: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
私钥: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
余额: 10000 ETH
```

## 🎉 成功标志

当您看到以下情况时，说明测试成功：

✅ **测试模式**：右上角显示 "测试" 标签和账户地址  
✅ **API测试**：所有测试项目显示绿色 "成功" 标签  
✅ **订单创建**：返回订单ID和成功消息  
✅ **区块链状态**：显示 "running" 状态和最新区块  

## 🛡️ 安全提醒

⚠️ **重要**：测试模式仅用于开发环境
- 使用的是公开的测试私钥
- 不要在生产环境使用
- 测试币没有真实价值
- 所有交易都在本地网络

## 📞 获取帮助

如果遇到问题：
1. 查看浏览器控制台日志
2. 检查后端日志文件 `backend/logs/app.log`
3. 确认所有服务都在运行
4. 参考 `BLOCKCHAIN_INTEGRATION_GUIDE.md`

祝您测试愉快！🎉
